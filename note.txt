开发计划

1 清理完善优化代码
2 waitdebugevent支持timeout
3 用native api代替 xdbgproxy中的所有win32 api， 防止调试时产生冲突


有一个想法是通过com把所有的请求转发到 inferior 处理


被调试程序中，发生了一个异常，异常处理程序向调试器发送消息，没有收到返回。
其它位置的消息全部被卡住（dll, 其它的异常）

api 线程没有收到消息卡住

========================================

调试器 6732 queryMemory没有返回，卡住。

其它线程全部卡在这里


问题描述

被调试线程发生异常，此时它锁住了线程列表
调试辅助线程也在试图锁住线程列表

此时调试器suspend了被调试线程，于是死锁


所有的事件处理通过调试辅助线程完成，事件接受线程只是投递消息并等待完成。 这样避免在事件发生线程中处理时被suspend，并且又有对象加锁，导致调试过程hung

原则： 事件接受线程中不能加锁， 至少不应该出现调试辅助线程等待事件接收线程的情况
因为事件接收线程通常是被调试线程，所以可能被调试器suspend